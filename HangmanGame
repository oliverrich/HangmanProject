#include <iostream>
#include <string>
#include <cstdlib> //for rand later
#include <ctime>
#include <cctype>

using namespace std;


//this function displays the ui for the word using _ for blanks and displays the
//character when guessed correctly
void displayWord(const string &word, const string &guessedLetters) {
    cout<<"\nword:";
    for (int i=0; i<word.length(); ++i) {
        char currentChar = tolower(word[i]);
        bool guessed = false;

        for (int j=0; j<guessedLetters.length(); ++j) {
            if (currentChar == guessedLetters[j]) {
                cout << word[i] << " ";
                guessed = true;
                break;
            }

        }
        if (!guessed)
            cout << "_";

    }
    cout << endl;
}

void displayGuess(const string &guessedLetters) {
    cout<<"Letter guessed: ";
    for (int i = 0; i < guessedLetters.length(); ++i) {
        cout << guessedLetters[i] << " ";
    }
    cout <<endl;
}



bool hasBeenGuessed(char guess, const string &guessedLetters) {
    for (int i=0; i<guessedLetters.length(); ++i) {
        if (guess == guessedLetters[i])
            return true;
    }
    return false;
}

bool isGuessInWord(char guess, const string &word){
    for (int i=0; i<word.length(); ++i) {
        if (guess == word[i]) {
            return true;
        }
    }
    return false;
}


bool isWordGuessed(const string &word, const string &guessedLetters) {
    for (int i = 0; i < word.length(); ++i) {
        char currentChar = tolower(word[i]);
        bool found = false;
        for (int j = 0; j < guessedLetters.length(); ++j) {
            if (currentChar == guessedLetters[j]) {
                found = true;
                break;
            }
        }
        if (!found) {
            return false;
        }
    }
    return true;
}



int main () {
    cout << "enter the word that you would like to be guessed:" << endl;
    string word;
    cin >> word;
    string guessedLetters= "";

    int maxAttempts = 6; //usually 6 guesses in a game but might make it later to allow this to change to make it harder
    int remainingGuesses = maxAttempts;

    //gameplay loop


    /*right now there is an issue for when you guess a letter correct, the porogram terminates.
     */
    while (remainingGuesses > 0) {
        displayWord(word, guessedLetters);
        displayGuess(guessedLetters);

        char guess;
        cout << "enter the letter to guess: ";
        cin >> guess;

        guess = tolower(guess);


        //here i cover some edge cases
        if (!isalpha(guess)) {
            cout<<"guess is not a letter";
        }

        if(hasBeenGuessed(guess, guessedLetters)){
            cout<< "this letter has been guessed";
        }

        if (isGuessInWord(guess, word)) {
            cout << guess << " is in the word!";
        }
        else {
            cout << guess << " is not in the word!";
            remainingGuesses--;

        }
        if (isWordGuessed(word, guessedLetters)) {
            cout << "\nCongratulations! You got it! " << word << "\n";
            break;
        }

    }
    if (remainingGuesses == 0) {
        cout << "\nGame over! Nice try :(" << endl;
        cout << "The word was: " << word << endl;
    }



    return 0;
}
